# LLM開発ノウハウ 記入例

> このファイルは `docs/development/llm_knowhow.md` の記入例です。実際の開発時にはこのファイルを直接編集せず、`llm_knowhow.md` の方を更新してください。

---

### CASE: `pydantic`のコード生成でv1系の古い記法が出力される

-   **日付**: 2024-05-20
-   **担当者**: SakuraRin
-   **関連タスク**: 設定管理モジュールの実装

#### 発生した問題

`pydantic`の`BaseSettings`を使った設定管理クラスの実装をLLMに依頼したところ、v2系で推奨されている`SettingsConfigDict`を使わず、古い`Config`サブクラスを使うコードが頻繁に生成された。

#### うまくいかなかった指示（プロンプト）

```
# 指示
pydanticのBaseSettingsを使って、.envファイルから設定を読み込むクラスを作成してください。
```

#### 解決策・効果的だった指示（プロンプト）

```
# 指示
pydantic v2のBaseSettingsとSettingsConfigDictを使って、.envファイルから設定を読み込むクラスを作成してください。
```

#### 分析・考察

LLMの学習データが`pydantic`のv1系が主流だった時期のものが多いため、単に「pydantic」と指示するだけでは古い知識が参照されてしまうと考えられる。
ライブラリのバージョンが大きく変わったものについては、**指示に明確なバージョン（`v2`など）や、新しいAPI名（`SettingsConfigDict`）を具体的に含める**ことで、期待するコードが出力されやすくなることが分かった。
